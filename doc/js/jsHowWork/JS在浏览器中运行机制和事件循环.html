<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS在浏览器中运行机制和事件循环 | 知识库</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="🖖小型前端知识库🖖">
    <link rel="preload" href="/blog-demo/assets/css/0.styles.8f26d5a6.css" as="style"><link rel="preload" href="/blog-demo/assets/js/app.d550568f.js" as="script"><link rel="preload" href="/blog-demo/assets/js/2.9eb2f958.js" as="script"><link rel="preload" href="/blog-demo/assets/js/11.284cf3a4.js" as="script"><link rel="prefetch" href="/blog-demo/assets/js/10.0efb48ae.js"><link rel="prefetch" href="/blog-demo/assets/js/12.2e730a1a.js"><link rel="prefetch" href="/blog-demo/assets/js/13.4cbdbc29.js"><link rel="prefetch" href="/blog-demo/assets/js/14.a5dcba57.js"><link rel="prefetch" href="/blog-demo/assets/js/15.12c8c0fe.js"><link rel="prefetch" href="/blog-demo/assets/js/16.36be232d.js"><link rel="prefetch" href="/blog-demo/assets/js/17.a71abff2.js"><link rel="prefetch" href="/blog-demo/assets/js/18.ff8b777b.js"><link rel="prefetch" href="/blog-demo/assets/js/19.76db4b73.js"><link rel="prefetch" href="/blog-demo/assets/js/20.fad1c0c9.js"><link rel="prefetch" href="/blog-demo/assets/js/21.4d7e21b9.js"><link rel="prefetch" href="/blog-demo/assets/js/22.b8c0287c.js"><link rel="prefetch" href="/blog-demo/assets/js/23.722d8536.js"><link rel="prefetch" href="/blog-demo/assets/js/24.ce2394c7.js"><link rel="prefetch" href="/blog-demo/assets/js/25.851351ef.js"><link rel="prefetch" href="/blog-demo/assets/js/26.1bf51354.js"><link rel="prefetch" href="/blog-demo/assets/js/27.f7cd5aec.js"><link rel="prefetch" href="/blog-demo/assets/js/28.a119db7c.js"><link rel="prefetch" href="/blog-demo/assets/js/29.2cc7ce5b.js"><link rel="prefetch" href="/blog-demo/assets/js/3.71704d6a.js"><link rel="prefetch" href="/blog-demo/assets/js/30.b5b34706.js"><link rel="prefetch" href="/blog-demo/assets/js/31.ea3bc06a.js"><link rel="prefetch" href="/blog-demo/assets/js/32.279d9880.js"><link rel="prefetch" href="/blog-demo/assets/js/33.17366f3a.js"><link rel="prefetch" href="/blog-demo/assets/js/34.228aaca8.js"><link rel="prefetch" href="/blog-demo/assets/js/35.f565841d.js"><link rel="prefetch" href="/blog-demo/assets/js/36.fcbf67df.js"><link rel="prefetch" href="/blog-demo/assets/js/37.136c79a0.js"><link rel="prefetch" href="/blog-demo/assets/js/38.d16994ee.js"><link rel="prefetch" href="/blog-demo/assets/js/39.0958ecda.js"><link rel="prefetch" href="/blog-demo/assets/js/4.ed4e2359.js"><link rel="prefetch" href="/blog-demo/assets/js/40.e63dfa5a.js"><link rel="prefetch" href="/blog-demo/assets/js/41.67123acc.js"><link rel="prefetch" href="/blog-demo/assets/js/42.0568441c.js"><link rel="prefetch" href="/blog-demo/assets/js/43.95ff9579.js"><link rel="prefetch" href="/blog-demo/assets/js/44.7b93a1e3.js"><link rel="prefetch" href="/blog-demo/assets/js/45.94bb121b.js"><link rel="prefetch" href="/blog-demo/assets/js/46.4e956d24.js"><link rel="prefetch" href="/blog-demo/assets/js/47.da5f967a.js"><link rel="prefetch" href="/blog-demo/assets/js/48.21d018d6.js"><link rel="prefetch" href="/blog-demo/assets/js/49.f9355e98.js"><link rel="prefetch" href="/blog-demo/assets/js/5.5d7cadc2.js"><link rel="prefetch" href="/blog-demo/assets/js/50.907acd5d.js"><link rel="prefetch" href="/blog-demo/assets/js/51.2dc13f47.js"><link rel="prefetch" href="/blog-demo/assets/js/6.4b76c2b0.js"><link rel="prefetch" href="/blog-demo/assets/js/7.e5f89a61.js"><link rel="prefetch" href="/blog-demo/assets/js/8.95e64e48.js"><link rel="prefetch" href="/blog-demo/assets/js/9.abb57db4.js">
    <link rel="stylesheet" href="/blog-demo/assets/css/0.styles.8f26d5a6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-demo/" class="home-link router-link-active"><!----> <span class="site-name">知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/blog-demo/doc/js/" aria-current="page" class="sidebar-link">js部分</a></li><li><a href="/blog-demo/doc/js/001-对象原型继承.html" class="sidebar-link">对象原型继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_1-构造函数-js的类" class="sidebar-link">1. 构造函数:JS的类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_1-1-使用new命令生成一个对象" class="sidebar-link">1.1 使用new命令生成一个对象</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_1-2-object-create-创建实例对象" class="sidebar-link">1.2 Object.create() 创建实例对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_2-原型对象的概述" class="sidebar-link">2. 原型对象的概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_2-1-构造函数的缺点" class="sidebar-link">2.1 构造函数的缺点</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_2-2-函数的prototype属性的作用" class="sidebar-link">2.2 函数的prototype属性的作用</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_2-3-原型链" class="sidebar-link">2.3 原型链</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_2-4-constructor属性" class="sidebar-link">2.4 constructor属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_3-构造函数的继承" class="sidebar-link">3. 构造函数的继承</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_4-多重继承" class="sidebar-link">4. 多重继承</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#_5-instanceof运算符-判断对象的类型" class="sidebar-link">5. instanceof运算符:判断对象的类型</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/001-对象原型继承.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/002-this_call_apply_bind.html" class="sidebar-link">this、call、apply、bind</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_1-什么是this" class="sidebar-link">1. 什么是this</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_2-不同环境下this的指向" class="sidebar-link">2. 不同环境下this的指向</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_2-1-全局环境：this指向顶层对象window" class="sidebar-link">2.1 全局环境：this指向顶层对象window</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_2-2-构造函数：this指向实例对象" class="sidebar-link">2.2 构造函数：this指向实例对象</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_2-3-对象的方法中-a-b-c-this指向a-b" class="sidebar-link">2.3 对象的方法中(a.b.c()):this指向a.b</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_3-使用this注意点" class="sidebar-link">3. 使用this注意点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_3-1-避免多层this" class="sidebar-link">3.1 避免多层this</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_3-2-避免数组处理方法中的this" class="sidebar-link">3.2 避免数组处理方法中的this</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_3-3-避免回调函数中的this" class="sidebar-link">3.3 避免回调函数中的this</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_4-绑定this的方法" class="sidebar-link">4. 绑定this的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_4-1-function-prototype-call" class="sidebar-link">4.1 Function.prototype.call()</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_4-2-function-prototype-apply" class="sidebar-link">4.2 Function.prototype.apply()</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#_4-3-function-prototype-bind" class="sidebar-link">4.3 Function.prototype.bind()</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/002-this_call_apply_bind.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/003-数据类型转换.html" class="sidebar-link">数据类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_1-概述" class="sidebar-link">1. 概述</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-强制类型转换" class="sidebar-link">2. 强制类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-1-其他类型转数字的规则" class="sidebar-link">2.1 其他类型转数字的规则</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-2-其他类型转字符串规则" class="sidebar-link">2.2 其他类型转字符串规则</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-3-其他类型转布尔规则" class="sidebar-link">2.3 其他类型转布尔规则</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-4-强制转为数字方法：number-、parseint-、parsefloat-string" class="sidebar-link">2.4 强制转为数字方法：Number()、parseInt()、parseFloat(string)</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-5-强制转换为字符串方法：string-value" class="sidebar-link">2.5 强制转换为字符串方法：String(value)</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_2-6-强转为布尔方法：boolean" class="sidebar-link">2.6 强转为布尔方法：Boolean()</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_3-自动类型转换" class="sidebar-link">3. 自动类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_3-1-出现自动类型转换的情况" class="sidebar-link">3.1 出现自动类型转换的情况</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_3-2-非严格判断相等的转换规则" class="sidebar-link">3.2 ==非严格判断相等的转换规则</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_3-2-自动转换为布尔值" class="sidebar-link">3.2 自动转换为布尔值</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_3-3-自动转换为字符串" class="sidebar-link">3.3 自动转换为字符串</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#_3-4-自动转换为数值" class="sidebar-link">3.4 自动转换为数值</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/003-数据类型转换.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/004-跨域.html" class="sidebar-link">跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#浏览器阻止跨域的目的" class="sidebar-link">浏览器阻止跨域的目的</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#跨域介绍" class="sidebar-link">跨域介绍</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#同源策略-same-origin-policy" class="sidebar-link">同源策略(Same origin Policy)</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#一个跨域的例子" class="sidebar-link">一个跨域的例子</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#如何进行跨域访问？" class="sidebar-link">如何进行跨域访问？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#使用jsonp来实现跨域访问" class="sidebar-link">使用JSONP来实现跨域访问</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#cors-跨域资源共享（cross-origin-resource-sharing）" class="sidebar-link">CORS 跨域资源共享（Cross-Origin Resource Sharing）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#iframe跨域方法" class="sidebar-link">iframe跨域方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#降域：document-domain" class="sidebar-link">降域：document.domain</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#window-postmessage页面通信" class="sidebar-link">window.postMessage页面通信</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/004-跨域.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/005-Ajax.html" class="sidebar-link">Ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/005-Ajax.html#使用xmlhttprequest实现ajax" class="sidebar-link">使用XMLHttpRequest实现Ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/005-Ajax.html#使用xmlhttprequest-发一个请求" class="sidebar-link">使用XMLHTTPRequest()发一个请求</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/005-Ajax.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/blog-demo/doc/js/006-函数.html" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_1-函数介绍" class="sidebar-link">1. 函数介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_1-1-函数的三种声明" class="sidebar-link">1.1 函数的三种声明</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_1-2-函数的重复声明：后面覆盖前面" class="sidebar-link">1.2 函数的重复声明：后面覆盖前面</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_1-3-函数调用、return语句、调用自身、函数是一种值" class="sidebar-link">1.3 函数调用、return语句、调用自身、函数是一种值</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_1-4-函数名提升" class="sidebar-link">1.4 函数名提升</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_2-函数的属性和方法" class="sidebar-link">2. 函数的属性和方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#_2-1-name属性" class="sidebar-link">2.1 name属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/006-函数.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/007-作用域.html" class="sidebar-link">作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_1-什么是作用域？" class="sidebar-link">1. 什么是作用域？</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_2-为什么需要作用域？最小访问原则" class="sidebar-link">2. 为什么需要作用域？最小访问原则</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_3-javascript中的作用域" class="sidebar-link">3. JavaScript中的作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_3-1-全局作用域" class="sidebar-link">3.1 全局作用域</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_3-2-局部作用域" class="sidebar-link">3.2 局部作用域</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_3-3-块语句" class="sidebar-link">3.3 块语句</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_3-4-作用域生存周期" class="sidebar-link">3.4 作用域生存周期</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_4-上下文" class="sidebar-link">4. 上下文</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_5-执行环境" class="sidebar-link">5. 执行环境</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_6-创建阶段" class="sidebar-link">6 创建阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_6-1-变量对象" class="sidebar-link">6.1 变量对象</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_6-2-作用域链" class="sidebar-link">6.2 作用域链</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_6-3-执行环境对象" class="sidebar-link">6.3 执行环境对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_7-代码执行阶段" class="sidebar-link">7. 代码执行阶段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_7-1-词法作用域" class="sidebar-link">7.1 词法作用域</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_7-2-闭包" class="sidebar-link">7.2 闭包</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_8-共有作用域和私有作用域" class="sidebar-link">8. 共有作用域和私有作用域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_8-1-模块模式" class="sidebar-link">8.1 模块模式</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_8-2-立即执行函数表达式（iife）" class="sidebar-link">8.2 立即执行函数表达式（IIFE）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#_9-使用-call-，-apply-和-bind-改变上下文" class="sidebar-link">9. 使用 .call()， .apply() 和 .bind() 改变上下文</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/007-作用域.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/008-排序算法.html" class="sidebar-link">排序算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/008-排序算法.html#_1-冒泡排序" class="sidebar-link">1. 冒泡排序</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/008-排序算法.html#_2-快读排序" class="sidebar-link">2. 快读排序</a></li></ul></li><li><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html" class="sidebar-link">获取标签的宽高及例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_1-常用的获取宽高的属性" class="sidebar-link">1. 常用的获取宽高的属性</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_2-关于offset的5个属性" class="sidebar-link">2. 关于offset的5个属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_2-1-offsetwidth与offsetheight" class="sidebar-link">2.1 offsetWidth与offsetHeight</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_2-3-offsetleft与offsettop" class="sidebar-link">2.3 offsetLeft与offsetTop</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_2-4-offsetparent" class="sidebar-link">2.4 offsetParent</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_3-关于宽高的实际应用" class="sidebar-link">3. 关于宽高的实际应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_3-1-判断滚动条到底的条件" class="sidebar-link">3.1 判断滚动条到底的条件</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_3-2-js判断div内离开顶部，-设置滚动到指定位置，-判断滚动到达底部：" class="sidebar-link">3.2 JS判断div内离开顶部， 设置滚动到指定位置， 判断滚动到达底部：</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_3-3-获取浏览器窗口宽度" class="sidebar-link">3.3 获取浏览器窗口宽度</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_4-document-compatmode对获取浏览器窗口大小的影响" class="sidebar-link">4. document.compatMode对获取浏览器窗口大小的影响</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_4-1-backcompat：-浏览器高度使用body的值" class="sidebar-link">4.1 BackCompat： 浏览器高度使用body的值</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_4-2-css1compat：浏览器高度使用documentelement的值" class="sidebar-link">4.2 CSS1Compat：浏览器高度使用documentElement的值</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_4-3-doctype-会影响document-compatmode" class="sidebar-link">4.3 DOCTYPE 会影响document.compatMode</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_4-4-documentelement和body" class="sidebar-link">4.4 documentElement和body</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_5-浏览器兼容性问题" class="sidebar-link">5. 浏览器兼容性问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_5-1-各浏览器下-scrolltop的差异" class="sidebar-link">5.1 各浏览器下 scrollTop的差异</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_6-一些问题" class="sidebar-link">6. 一些问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_6-1-document-body-scrolltop总是0的原因" class="sidebar-link">6.1 document.body.scrollTop总是0的原因</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#_6-2-给body标签设置高度后，显示的效果是一实际高度算的" class="sidebar-link">6.2 给body标签设置高度后，显示的效果是一实际高度算的</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/009-获取标签宽高及实例.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html" class="sidebar-link">从输入URL到页面渲染过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_1-url解析" class="sidebar-link">1. URL解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_1-1-地址解析" class="sidebar-link">1.1 地址解析</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_1-2-hsts" class="sidebar-link">1.2 HSTS</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_1-3-其他操作" class="sidebar-link">1.3 其他操作</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_1-4-缓存检查" class="sidebar-link">1.4 缓存检查</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_2-dns查询" class="sidebar-link">2. DNS查询</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_3-tcp链接" class="sidebar-link">3. TCP链接</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_3-1-tcp-ip分层" class="sidebar-link">3.1 TCP/IP分层</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_3-2-tcp三次握手建立连接" class="sidebar-link">3.2 TCP三次握手建立连接</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_3-3-tcp四次挥手断开连接" class="sidebar-link">3.3 TCP四次挥手断开连接</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_4-服务器处理请求" class="sidebar-link">4. 服务器处理请求</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_5-浏览器接受响应" class="sidebar-link">5. 浏览器接受响应</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-渲染页面" class="sidebar-link">6. 渲染页面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-1-浏览器内核、渲染流程" class="sidebar-link">6.1 浏览器内核、渲染流程</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-2-html解析" class="sidebar-link">6.2 HTML解析</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-3-css解析" class="sidebar-link">6.3 CSS解析</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-4-生成渲染树" class="sidebar-link">6.4 生成渲染树</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-5-布局、绘制、渲染" class="sidebar-link">6.5 布局、绘制、渲染</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_6-6-回流与重绘" class="sidebar-link">6.6 回流与重绘</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_7-javascript-编译执行" class="sidebar-link">7. JavaScript 编译执行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_7-1-词法分析" class="sidebar-link">7.1 词法分析</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_7-2-预编译" class="sidebar-link">7.2 预编译</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#_7-3-执行" class="sidebar-link">7.3 执行</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/010-从输入URL到页面渲染过程.html#参考资料：" class="sidebar-link">参考资料：</a></li></ul></li><li><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html" class="sidebar-link">JavaScript浮点数运算的精度问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_1-js中浮点数运算问题" class="sidebar-link">1. JS中浮点数运算问题</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_2-问题原因" class="sidebar-link">2. 问题原因</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_3-计算过程" class="sidebar-link">3. 计算过程</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_4-整数的精度问题" class="sidebar-link">4. 整数的精度问题</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_5-解决方案" class="sidebar-link">5. 解决方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_5-1-第三方类库" class="sidebar-link">5.1 第三方类库</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_5-2-整数表示" class="sidebar-link">5.2 整数表示</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_6-格式化数字、金额、保留几位小数等" class="sidebar-link">6 格式化数字、金额、保留几位小数等</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_7-浮点数运算解决方法" class="sidebar-link">7. 浮点数运算解决方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_7-1-tofixed-方法" class="sidebar-link">7.1 toFixed() 方法</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_7-2-加法函数" class="sidebar-link">7.2 加法函数</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_7-3-减法函数" class="sidebar-link">7.3 减法函数</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_7-4-乘法函数" class="sidebar-link">7.4 乘法函数</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#_7-5-除法函数" class="sidebar-link">7.5 除法函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS代码执行机制和事件循环</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html" class="active sidebar-link">JS在浏览器中运行机制和事件循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_1-javascript是单线程执行的" class="sidebar-link">1. JavaScript是单线程执行的</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_2-javascript执行机制中名词介绍" class="sidebar-link">2. JavaScript执行机制中名词介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_2-1-执行栈" class="sidebar-link">2.1 执行栈</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_2-2-主线程" class="sidebar-link">2.2 主线程</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_2-3-任务队列" class="sidebar-link">2.3 任务队列</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_2-4-事件循环" class="sidebar-link">2.4 事件循环</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_3-宏任务和微任务" class="sidebar-link">3. 宏任务和微任务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_3-1-事件循环对宏任务和微任务的处理" class="sidebar-link">3.1 事件循环对宏任务和微任务的处理</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#_4-以实际代码讲解javascript执行流程" class="sidebar-link">4. 以实际代码讲解JavaScript执行流程</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS在浏览器中运行机制和事件循环.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html" class="sidebar-link">JS代码在nodejs环境下执行机制和事件循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_1-说明" class="sidebar-link">1. 说明</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_2-nodejs的启动过程" class="sidebar-link">2. nodejs的启动过程</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-nodejs的事件循环详解" class="sidebar-link">3. nodejs的事件循环详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-1-timer-阶段" class="sidebar-link">3.1 Timer 阶段</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-2-pending-i-o-callback-阶段" class="sidebar-link">3.2 Pending I/O Callback 阶段</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-3-idle-prepare-阶段" class="sidebar-link">3.3 Idle, Prepare 阶段</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-4-poll-阶段，重要阶段" class="sidebar-link">3.4 Poll 阶段，重要阶段</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-5-check-阶段" class="sidebar-link">3.5 Check  阶段</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_3-6-close-callbacks-阶段" class="sidebar-link">3.6 Close Callbacks 阶段</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_4-nodejs执行js代码过程及事件循环过程" class="sidebar-link">4. nodejs执行JS代码过程及事件循环过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_4-1-关于promise和process-nexttick" class="sidebar-link">4.1 关于Promise和process.nextTick</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_4-2-关于settimeout-…-0-和-setimmediate" class="sidebar-link">4.2 关于setTimeout(…, 0) 和 setImmediate</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#_5-一个实际例子演示" class="sidebar-link">5. 一个实际例子演示</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/jsHowWork/JS中异步方法.html" class="sidebar-link">JS中异步方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS中异步方法.html#_1-settimeout、setinterval" class="sidebar-link">1. setTimeout、setInterval</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS中异步方法.html#_1-1-关于延迟" class="sidebar-link">1.1 关于延迟</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS中异步方法.html#_2-setimmediate" class="sidebar-link">2. setImmediate()</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS中异步方法.html#_3-process-nexttick" class="sidebar-link">3. process.nextTick()</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/JS中异步方法.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html" class="sidebar-link">EventLoop 和浏览器渲染、帧动画、空闲回调的关系</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_1-前言" class="sidebar-link">1. 前言</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_2-事件循环" class="sidebar-link">2. 事件循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_2-1-定义" class="sidebar-link">2.1 定义</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_2-2-流程" class="sidebar-link">2.2 流程</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_3-多任务队列" class="sidebar-link">3. 多任务队列</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_4-requestanimationframe" class="sidebar-link">4. requestAnimationFrame</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_4-1-闪烁动画" class="sidebar-link">4.1 闪烁动画</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_4-2-定时器合并" class="sidebar-link">4.2 定时器合并</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_5-requestidlecallback" class="sidebar-link">5. requestIdleCallback</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_5-1-草案解读" class="sidebar-link">5.1 草案解读</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_5-2-渲染有序进行" class="sidebar-link">5.2 渲染有序进行</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_5-3-渲染长期空闲" class="sidebar-link">5.3 渲染长期空闲</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_5-4-动画例子：滚动" class="sidebar-link">5.4 动画例子：滚动</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_5-5-动画" class="sidebar-link">5.5 动画</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#_6-总结" class="sidebar-link">6. 总结</a></li><li class="sidebar-sub-header"><a href="/blog-demo/doc/js/jsHowWork/EventLoop和浏览器渲染-帧动画-空闲回调的关系.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高级</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>文章</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1-javascript是单线程执行的">1. JavaScript是单线程执行的</a></li><li><a href="#_2-javascript执行机制中名词介绍">2. JavaScript执行机制中名词介绍</a><ul><li><a href="#_2-1-执行栈">2.1 执行栈</a></li><li><a href="#_2-2-主线程">2.2 主线程</a></li><li><a href="#_2-3-任务队列">2.3 任务队列</a></li><li><a href="#_2-4-事件循环">2.4 事件循环</a></li></ul></li><li><a href="#_3-宏任务和微任务">3. 宏任务和微任务</a><ul><li><a href="#_3-1-事件循环对宏任务和微任务的处理">3.1 事件循环对宏任务和微任务的处理</a></li></ul></li><li><a href="#_4-以实际代码讲解javascript执行流程">4. 以实际代码讲解JavaScript执行流程</a></li><li><a href="#参考资料">参考资料</a></li></ul></div><p></p> <p>[TOC]</p> <h1 id="一、js在浏览器中运行机制和事件循环"><a href="#一、js在浏览器中运行机制和事件循环" class="header-anchor">#</a> 一、JS在浏览器中运行机制和事件循环</h1> <h2 id="_1-javascript是单线程执行的"><a href="#_1-javascript是单线程执行的" class="header-anchor">#</a> 1. JavaScript是单线程执行的</h2> <p>JavaScript语言的执行是单线程(single thread)的。</p> <p>所谓的<code>单线程</code>，就是指一次只执行一个任务，如果有多个任务，就必须排队，前面一个任务完成，才能执行后面任务。</p> <p>这种模式的好处是实现起来比较简单，执行环境相对单纯；坏处是只要有一个任务耗时很长，后面的任务都必须排队等待，会拖延整个程序的执行。常见的浏览器无响应(假死)，往往就是因为某一段JavaScript代码长时间运行(比如死循环)，导致整个页面卡在这个地方，其他任务无法执行。</p> <p>为了解决这个问题，JavaScript语言将任务的执行模式分成两种：<code>同步(Synchronous)</code>和<code>异步(Asynchronous)</code>。</p> <p><code>同步任务</code>：在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务。</p> <p><code>异步任务</code>：不进入主线程、而进入&quot;任务队列&quot;（task queue）的任务，只有&quot;任务队列&quot;通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p> <p>JavaScript执行机制：</p> <blockquote><ol><li>所有同步任务都在主线程上执行，形成一个执行栈（execution context stack）。</li> <li>主线程之外，还存在一个&quot;任务队列&quot;（task queue）。只要异步任务有了运行结果，就在&quot;任务队列&quot;之中放置一个事件。</li> <li>一旦&quot;执行栈&quot;中的所有同步任务执行完毕，系统就会读取&quot;任务队列&quot;，如果有有执行任务，则进入执行栈，开始执行。</li> <li>主线程不断重复上面的三步，此过程也就是常说的Event Loop(事件循环)。</li></ol></blockquote> <h2 id="_2-javascript执行机制中名词介绍"><a href="#_2-javascript执行机制中名词介绍" class="header-anchor">#</a> 2. JavaScript执行机制中名词介绍</h2> <h3 id="_2-1-执行栈"><a href="#_2-1-执行栈" class="header-anchor">#</a> 2.1 执行栈</h3> <p>当我们调用一个方法的时候，js会生成一个与这个方法相对应的执行环境，也叫执行上下文，这个执行环境存在着这个方法的私有作用域、参数、this对象等等。因为js是单线程的，同一时间只能执行一个方法，所以当一系列的方法被依次调用的时候，js会先解析这些方法，把其中的<strong>同步任务</strong>按照执行顺序排队到一个地方，这个地方叫做执行栈。</p> <h3 id="_2-2-主线程"><a href="#_2-2-主线程" class="header-anchor">#</a> 2.2 主线程</h3> <p>JavaScript是单线程的，那么这个单线程就成为主线程。而事件循环在主线程执行完执行栈代码后，才执行的。所以主线程代码执行时间过长，会阻塞事件循环的执行。只有当执行栈为空的时候(同步代码执行完毕)，才会执行事件循环来观察有哪些事件回调需要执行，当事件循环检测到任务队列有事件就读取出回调放到执行栈由主线程执行。</p> <h3 id="_2-3-任务队列"><a href="#_2-3-任务队列" class="header-anchor">#</a> 2.3 任务队列</h3> <p>任务队列也有时称叫消息队列、回调队列。</p> <p>异步操作会将相关回调添加到任务队列中。而不同的异步操作添加到任务队列的时机也不同，如<code>onclick</code>, <code>setTimeout</code>,<code>ajax</code>处理的方式都不同，这些异步操作是由浏览器内核的<code>webcore</code>来执行的，<code>webcore</code>包含下图中的3种 webAPI，分别是<code>DOM Binding</code>、<code>network</code>、<code>timer</code>模块。</p> <ul><li><strong>DOM Binding</strong> 模块处理一些DOM绑定事件，如<code>onclick</code>事件触发时，回调函数会立即被<code>webcore</code>添加到任务队列中。</li> <li><strong>network</strong> 模块处理<code>Ajax</code>请求，在网络请求返回时，才会将对应的回调函数添加到任务队列中。</li> <li><strong>timer</strong> 模块会对<code>setTimeout</code>等计时器进行延时处理，当时间到达的时候，才会将回调函数添加到任务队列中。</li></ul> <h3 id="_2-4-事件循环"><a href="#_2-4-事件循环" class="header-anchor">#</a> 2.4 事件循环</h3> <p><img src="/blog-demo/assets/img/js_EventLoop.80f6e345.jpg" alt=""></p> <ol><li>主线程运行的时候会生成堆（heap）和栈（stack）；</li> <li>js从上到下解析方法，将其中的同步任务按照执行顺序排列到执行栈中；</li> <li>当程序调用外部的API时，比如ajax、setTimeout等，会将此类异步任务挂起，继续执行执行栈中的任务，等异步任务返回结果后，再按照执行顺序排列到任务队列中；</li> <li>主线程先将执行栈中的同步任务清空，然后检查任务队列中是否有任务，如果有，就将第一个事件对应的回调推到执行栈中执行，若在执行过程中遇到异步任务，则继续将这个异步任务排列到任务队列中。</li> <li>主线程每次将执行栈清空后，就去任务队列中检查是否有任务，如果有，就每次取出一个推到执行栈中执行，这个过程是循环往复的... ...，这个过程被称为“Event Loop 事件循环”。</li></ol> <p>知道了这个后，下面代码例子输出结果你因该知道结果吧：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>setTimeout(function(){
    console.log(1);
},0);

console.log(2);

setTimeout(function(){
    console.log(3);
},0);

console.log(4);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>https://html.spec.whatwg.org/multipage/webappapis.html#event-loops</p> <h2 id="_3-宏任务和微任务"><a href="#_3-宏任务和微任务" class="header-anchor">#</a> 3. 宏任务和微任务</h2> <p>出现<strong>Promise</strong>后，JavaScript对于任务的定义除了广义的同步任务和异步任务，又对任务做了更精细的定义，macrotask（宏任务）和 microtask（微任务）：</p> <ul><li><strong>宏任务</strong>（按优先级顺序排列）: <code>script</code>(你的全部JS代码，“同步代码”）, <code>setTimeout</code>, <code>setInterval</code>, <code>setImmediate(node的)</code>, <code>I/O</code>,<code>UI rendering</code></li> <li><strong>微任务</strong>（按优先级顺序排列）:<code>process.nextTick(node的)</code>,<code>Promise</code>（这里指浏览器原生实现的 Promise）, <code>Object.observe</code>, <code>MutationObserver</code></li></ul> <p>***注意：***宏任务、微任务中出现的nodejs中的方法是nodejs专有的，浏览器的JavaScript环境暂时没有支持。</p> <h3 id="_3-1-事件循环对宏任务和微任务的处理"><a href="#_3-1-事件循环对宏任务和微任务的处理" class="header-anchor">#</a> 3.1 事件循环对宏任务和微任务的处理</h3> <p>有了宏任务和微任务后，JavaScript事件循环对此处理方法如下形式：</p> <ul><li>js引擎首先从宏任务队列中取出第一个任务，执行完毕后，将微任务队列中的所有任务取出，按顺序全部执行；</li> <li>然后再从<strong>宏任务队列</strong>(macrotask queue)中取下一个，执行完毕后，再次将<strong>微任务队列</strong>(microtask queue)中的全部取出；</li> <li>循环往复，直到两个queue中的任务都取完。</li></ul> <p><img src="/blog-demo/assets/img/hong.aeafbdd6.png" alt=""></p> <p>https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#microtask-queuing</p> <h2 id="_4-以实际代码讲解javascript执行流程"><a href="#_4-以实际代码讲解javascript执行流程" class="header-anchor">#</a> 4. 以实际代码讲解JavaScript执行流程</h2> <p>如下代码：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>上面代码执行过程：</p> <ul><li>第一轮事件循环
<ul><li>整体script代码(同步代码)作为第一个宏任务进入主线程，遇到<code>console.log</code>，输出1</li> <li>遇到<code>setTimeout</code>,其回调函数被放到<code>宏任务队列</code>中，暂记为<code>setTmineout1</code></li> <li>遇到<code>console.log</code>，输出5</li> <li>遇到<code>setTimeout</code>,其回调函数被放到<code>宏任务队列</code>中，暂记为<code>setTmineout2</code></li> <li>遇到<code>console.log</code>，输出9</li> <li>一个宏任务执行结束，去<code>微任务队列</code>查找是否有待执行的任务，没有，结束</li> <li>第一轮循环结束，输出：<code>1 5 9</code></li></ul></li> <li>第二轮事件循环
<ul><li>从宏任务队列中取出一个任务，即<code>setTmineout1</code>，开始执行</li> <li>遇到<code>console.log</code>，输出2</li> <li>遇到<code>Promise</code>,创建<code>Promise</code>,输出了3,同时把<code>Promise.then</code>回调函数放到<code>微任务队列</code></li> <li>一个宏任务执行结束，去<code>微任务队列</code>查找是否有待执行的任务, 发现有微任务，全部取出放到执行栈执行</li> <li>执行微任务，此时就一个微任务，<code>console.log</code>，输出4</li> <li>微任务执行结束</li> <li>第二轮循环结束，输出：<code>2 4</code></li></ul></li> <li>第三轮事件循环与第二轮一样，输出：<code>6 7 8</code></li> <li>事件循环发现所有任务都已经处理完毕，此时程序执行结束</li> <li>全部的输出：<code>1 5 9 2 3 4 6 7 8</code>,可复制代码到<code>chrome</code>浏览器控制台中运行校验结果</li></ul> <p>***注意：***浏览器环境JavaScript的执行机制和node中JavaScript的执行机制是不同的。</p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p><a href="https://mp.weixin.qq.com/s?__biz=MzA5NzkwNDk3MQ==&amp;mid=2650585345&amp;idx=1&amp;sn=6fd112fbed64246601b48e392d1e7a0b&amp;source=41#wechat_redirect" target="_blank" rel="noopener noreferrer">这一次，彻底弄懂 JavaScript 执行机制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="http://www.yangzicong.com/article/3" target="_blank" rel="noopener noreferrer">JavaScript任务队列的顺序机制（事件循环）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://segmentfault.com/a/1190000017120344" target="_blank" rel="noopener noreferrer">搞懂 JavsScript 异步 —  事件轮询<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://segmentfault.com/a/1190000012362096" target="_blank" rel="noopener noreferrer">JS与Node.js中的事件循环<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog-demo/doc/js/013-JS浮点数运算的精度问题.html" class="prev">
        JavaScript浮点数运算的精度问题
      </a></span> <span class="next"><a href="/blog-demo/doc/js/jsHowWork/JS代码在nodejs环境下执行机制和事件循环.html">
        JS代码在nodejs环境下执行机制和事件循环
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog-demo/assets/js/app.d550568f.js" defer></script><script src="/blog-demo/assets/js/2.9eb2f958.js" defer></script><script src="/blog-demo/assets/js/11.284cf3a4.js" defer></script>
  </body>
</html>
